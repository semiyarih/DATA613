<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Relatively Big Data and Introduction to SQL</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="bigdata_sql_introduction_files/libs/clipboard/clipboard.min.js"></script>
<script src="bigdata_sql_introduction_files/libs/quarto-html/quarto.js"></script>
<script src="bigdata_sql_introduction_files/libs/quarto-html/popper.min.js"></script>
<script src="bigdata_sql_introduction_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="bigdata_sql_introduction_files/libs/quarto-html/anchor.min.js"></script>
<link href="bigdata_sql_introduction_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="bigdata_sql_introduction_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="bigdata_sql_introduction_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="bigdata_sql_introduction_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="bigdata_sql_introduction_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Relatively Big Data and Introduction to SQL</h1>
<p class="subtitle lead">Thanks to Professor David Gerard</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="tools-for-manipulating-data" class="level1">
<h1>Tools for Manipulating Data</h1>
<p>When working with data in R, three popular tools for manipulating data are dplyr, base R dataframes, and data.table. Here’s a comparison of the three approaches:</p>
<section id="base-r-dataframes" class="level2">
<h2 class="anchored" data-anchor-id="base-r-dataframes">Base R (dataframes)</h2>
<ul>
<li><p>It is not as intuitive as <code>dplyr</code></p></li>
<li><p>Subsetting data frames can be done with square brackets <code>[]</code>, <code>subset()</code>, <code>with()</code>, and <code>transform()</code></p></li>
<li><p>While base R is relatively fast, especially with <em>vectorized operations</em>, it can be slower than both <code>dplyr</code> and <code>data.table</code> for larger datasets.</p></li>
<li><p>Base R is typically more memory-efficient than <code>dplyr</code> but not as efficient as <code>data.table</code> for in-place data manipulation.</p></li>
</ul>
</section>
<section id="dplyr-part-of-the-tidyverse" class="level2">
<h2 class="anchored" data-anchor-id="dplyr-part-of-the-tidyverse"><code>dplyr</code> (part of the <code>tidyverse</code>)</h2>
<ul>
<li><p><code>dplyr</code> provides a highly readable and intuitive syntax, relying heavily on the pipe (%&gt;%) operator to chain operations. Functions in dplyr are “verb-based” (e.g., select(), filter(), mutate(), summarize()), which often makes code more readable.</p></li>
<li><p>While <code>dplyr</code> is not as fast as <code>data.table</code>, it is often sufficient for many tasks, especially when working on <strong>moderate-sized</strong> datasets.</p></li>
<li><p><code>dplyr</code> is less memory efficient than data.table, but it optimizes in-place operations on data frames by using “lazy evaluation”.</p>
<ul>
<li>In <code>dplyr</code>, “lazy evaluation” means that dplyr doesn’t immediately apply operations when you write them. Instead, it waits until the final result is needed (like when you ask to view or save the data) before actually performing the calculations. This helps optimize performance by delaying operations and potentially combining them in a more efficient way.</li>
</ul></li>
</ul>
</section>
<section id="data.table" class="level2">
<h2 class="anchored" data-anchor-id="data.table">data.table</h2>
<ul>
<li><p>Extremely fast compared to both <em>dplyr</em> and <em>base R.</em> <code>data.table</code> is optimized for speed and memory, especially for large datasets.</p></li>
<li><p>It is more memory efficient compare the dplyr and Base R dataframes.</p></li>
</ul>
</section>
</section>
<section id="introduction-to-big-data-in-r" class="level1">
<h1>Introduction to Big Data in R</h1>
<ul>
<li><p>As the world generates more data than ever, traditional tools like R, which work in memory (RAM), often struggle to handle very large datasets, referred to as Big Data. This is because when datasets exceed your computer’s available memory, R slows down or crashes.</p></li>
<li><p>Big Data refers to datasets that are too large or complex to be processed using traditional data processing applications.</p></li>
</ul>
<section id="how-r-handles-data" class="level2">
<h2 class="anchored" data-anchor-id="how-r-handles-data">How R Handles Data</h2>
<p>R is excellent for analyzing datasets that fit comfortably into your machine’s memory. Packages like {<code>data.table</code>} in R help optimize performance and work efficiently with relatively large datasets (up to several gigabytes). {data.table} allows for fast reading, writing, filtering, and aggregating of data compared to R’s base functions. However, as your data grows beyond your computer’s memory capacity, even optimized tools like {<code>data.table</code>} hit their limits.</p>
</section>
<section id="when-to-switch-to-distributed-computing" class="level2">
<h2 class="anchored" data-anchor-id="when-to-switch-to-distributed-computing">When to Switch to Distributed Computing</h2>
<p>When datasets become too large for R to handle on its own, the next step is to use distributed computing tools like <code>Apache Spark</code>. <code>Spark</code> divides large datasets into smaller pieces and processes them across multiple machines or nodes. This distributed approach allows for the handling of terabytes or even petabytes of data that would otherwise be impossible to load into memory.</p>
<p>Fortunately, you can integrate Spark into your R workflow using the {<code>sparklyr</code>} package. This package enables you to use Spark’s powerful data processing capabilities while writing R code, making it easier to handle massive datasets without changing the way you work with data in R.</p>
</section>
<section id="note" class="level2">
<h2 class="anchored" data-anchor-id="note">Note:</h2>
<ul>
<li>While often used interchangeably, “<code>Spark</code>” technically refers to the core engine within the <code>Apache Spark</code> framework.</li>
</ul>
</section>
</section>
<section id="introduction-to-sql-and-interfacing-with-r" class="level1">
<h1>Introduction to <code>SQL</code> and Interfacing with R</h1>
<p>At the core of Big Data and analytics is the ability to store, manage, and query data efficiently. This is where <code>SQL</code> (Structured Query Language) comes into play. <code>SQL</code> is the most widely-used language for interacting with relational databases, and it allows you to easily perform operations like querying, filtering, and summarizing large datasets stored in databases.</p>
<section id="using-sql-in-r" class="level2">
<h2 class="anchored" data-anchor-id="using-sql-in-r">Using SQL in R</h2>
<p>R can interface directly with <code>SQL</code> databases using packages like {<code>DBI</code>} and {<code>duckdb</code>}. Here’s a breakdown:</p>
<ul>
<li><p><strong>{<code>DBI</code>}:</strong> This package provides a database interface definition for communication between R and various <em>database management systems</em> (DBMS). It acts as a bridge, allowing you to connect R to different databases like <code>MySQL</code>, <code>PostgreSQL</code>, <code>SQLite</code>, etc.</p></li>
<li><p><strong>{<code>duckdb</code>}:</strong> This package is specifically <em>designed for working with the DuckDB</em> database, which is an in-process SQL OLAP (OnLine Analytic Processing) database management system. It’s optimized for analytical queries and can handle large datasets efficiently within R.</p></li>
</ul>
<p>This combination of R and SQL provides a powerful workflow for handling large datasets: you can start working with moderately large data in R using {<code>data.table</code>} and transition to <code>SQL</code> databases through {<code>DBI</code>} and {<code>duckdb</code>} (t) when your data grows too large.</p>
</section>
<section id="sql-database-management-with-dbeaver-or-duckdb" class="level2">
<h2 class="anchored" data-anchor-id="sql-database-management-with-dbeaver-or-duckdb"><code>SQL</code> Database Management with <code>DBeaver</code> or <code>DuckDB</code></h2>
<ul>
<li><p>Both <code>DuckDB</code> and <code>DBeaver</code> are tools used for interacting with databases.</p></li>
<li><p>They both support <code>SQL</code> queries, allowing you to <em>manage and manipulate</em> data effectively.</p></li>
</ul>
<section id="recommendation" class="level3">
<h3 class="anchored" data-anchor-id="recommendation">Recommendation:</h3>
<ul>
<li><p><strong>For Analytical Work</strong>: If your primary goal is to perform complex analytical queries on large datasets, <strong>DuckDB</strong> is a great choice due to its performance and efficiency.</p></li>
<li><p><strong>For Database Management</strong>: If you need a versatile tool to manage multiple databases with a user-friendly interface, <strong>DBeaver</strong> is recommended. It supports various databases and offers extensive features for database administration.</p></li>
</ul>
<p><code>DBeaver</code> is a great tool for users who prefer a graphical interface to manage databases but still want the full power of SQL at their fingertips.</p>
</section>
<section id="instructions-generate-rmarkdown-file-and-a-word-file-that-shows-all-required-code-and-output." class="level3">
<h3 class="anchored" data-anchor-id="instructions-generate-rmarkdown-file-and-a-word-file-that-shows-all-required-code-and-output.">Instructions: Generate Rmarkdown file and a Word file that shows all required code and output.</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)    </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)  </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="read-file" class="level2">
<h2 class="anchored" data-anchor-id="read-file">Read file</h2>
<ul>
<li><p>We’ll demonstrate most methods with the data from “NYC-flights14” dataset from the data.table package vignettes. Go to <a href="https://raw.githubusercontent.com/semiyarih/DATA613/refs/heads/main/data/flights14.csv">my GitHub</a> and download “flights14.csv”.</p></li>
<li><p>Let’s load the data with <code>read.csv()</code> function and check it class.</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read.csv</span>(<span class="st">"../data/flights14.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">class</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
</div>
<ul>
<li><p><code>read.csv()</code> will return a <code>data.frame</code> object.</p></li>
<li><p>Let’s load the data with <code>read_csv()</code> function and check it class.</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>flights_tib <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"../data/flights14.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(flights_tib)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "spec_tbl_df" "tbl_df"      "tbl"         "data.frame" </code></pre>
</div>
</div>
<ul>
<li><p><code>read_csv()</code> will return a <code>tibble</code> object.</p></li>
<li><p>Read in data with <code>fread()</code> (for “file read”). It accepts all delimiters, which you (optionally) specify with the <code>sep</code> argument. The default is to guess the delimiter.</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>flights <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="st">"../data/flights14.csv"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><code>fread()</code> will return a <code>data.table</code> object.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(flights)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(flights)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="use-fwrite-to-write-a-data.table-object-to-a-file." class="level2">
<h2 class="anchored" data-anchor-id="use-fwrite-to-write-a-data.table-object-to-a-file.">Use <code>fwrite()</code> to write a <code>data.table</code> object to a file.</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">flights_date =</span> <span class="fu">make_date</span>(year, month,day)) <span class="sc">%&gt;%</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(flights_date, origin, dest) <span class="ot">-&gt;</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  flights_1</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>flights_1 <span class="sc">%&gt;%</span> </span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   flights_date origin   dest
         &lt;Date&gt; &lt;char&gt; &lt;char&gt;
1:   2014-01-01    JFK    LAX
2:   2014-01-01    JFK    LAX
3:   2014-01-01    JFK    LAX
4:   2014-01-01    LGA    PBI</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fwrite</span>(flights_1, <span class="st">"../data/flights14_1.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Now, the <code>flights14_1.csv</code> is in your data folder</li>
</ul>
</section>
<section id="showing-file" class="level2">
<h2 class="anchored" data-anchor-id="showing-file">Showing file</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(flights)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(flights<span class="sc">$</span>dest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Or</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(dest) <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(flights<span class="sc">$</span>origin)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>We usually use the base function <code>str()</code> (for “structure”) to look at the data.table entries.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## data.table way</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str</span>(flights)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## Similar tidyverse way</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glimpse</span>(flights_tib)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## glimpse with data.table object</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glimpse</span>(flights)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## str() with tibble object</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str</span>(flights_tib)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Note: The above examples indicate that in <code>data.table</code>, integer numerical values are saved as integers to save storage. However, in the tidyverse, they are saved as doubles unless explicitly specified as integers.</strong></p>
<ul>
<li>We can use <code>as.data.table()</code> to convert a <code>tibble</code> or a <code>data.frame</code> into a <code>data.table</code>. But there is rarely a time when you’d do this, since you use data.table for large datasets that you read in with <code>fread()</code>.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>    temp_dt <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(flights_tib)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">class</span>(temp_dt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.table" "data.frame"</code></pre>
</div>
</div>
</section>
<section id="filteringarranging-rows-observations" class="level2">
<h2 class="anchored" data-anchor-id="filteringarranging-rows-observations">Filtering/Arranging Rows (Observations)</h2>
<ul>
<li>Just like in the tidyverse, we use logicals to filter based on rows. The syntax for this is to place the logicals inside a <strong>bracket</strong>. Let’s find all flights that left JFK and arrived at LAX.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## data.table way</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    flights[origin <span class="sc">==</span> <span class="st">"JFK"</span> <span class="sc">&amp;</span> dest <span class="sc">==</span> <span class="st">"LAX"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## equivalent tidyverse way</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    flights_tib <span class="sc">%&gt;%</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(origin <span class="sc">==</span> <span class="st">"JFK"</span>, dest <span class="sc">==</span> <span class="st">"LAX"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>To get a specific row, insert a number into the brackets.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## data.table way</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>    flights[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">207</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## equivalent tidyverse way</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    flights_tib <span class="sc">%&gt;%</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">slice</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">207</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Reorder rows by using the <code>order()</code> function inside the <strong>brackets</strong>. Let’s reorder the rows alphabetically by origin, and <em>break ties in reverse alphabetical order by destination</em>.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## data.table way</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>    flights[<span class="fu">order</span>(origin, <span class="sc">-</span>dest)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## equivalent tidyverse way    </span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    flights_tib <span class="sc">%&gt;%</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">arrange</span>(origin, <span class="fu">desc</span>(dest))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><strong>Exercise</strong>: Use both data.table and the tidyverse to select all flights from EWR or LGA, and arrange the flights in decreasing order of departure delay.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## equivalent tidyverse way</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>    flights_tib <span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(origin <span class="sc">==</span> <span class="st">"EWR"</span> <span class="sc">|</span> origin <span class="sc">==</span> <span class="st">"LGA"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">arrange</span>(<span class="fu">desc</span>(dep_delay))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="selecting-columns-variables" class="level2">
<h2 class="anchored" data-anchor-id="selecting-columns-variables">Selecting Columns (Variables)</h2>
<ul>
<li><p>To select a variable (a column), you also use bracket notation, but you place a comma before you select the columns. This idea is that you are selecting all rows (empty space before comma).</p></li>
<li><p>There are lots of ways to select columns that keeps the new object a <code>data.table</code>.</p></li>
<li><p><strong>List method</strong>: Use the <code>.()</code> function (which is an alias for <code>list()</code>).</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## data.table way</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>    flights[, .(origin, dest)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## Or</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>    flights[, <span class="fu">list</span>(origin, dest)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## equivalent tidyverse way</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    flights_tib <span class="sc">%&gt;%</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(origin, dest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><strong>Character Vector Method</strong>: Use <code>c()</code> with their character names</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>    flights[, <span class="fu">c</span>(<span class="st">"origin"</span>, <span class="st">"dest"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><strong>Range Method</strong>: Use <code>:</code> to select variables within a range of columns.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>    flights[, origin<span class="sc">:</span>dest]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><strong>Prespecify Method</strong>: Define variables to keep outside of the <code>data.table</code>, then use <code>with = FALSE</code>. <em>This option makes data.table not think that <code>keep_vec</code> is a variable in the <code>data.table</code></em>.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>    keep_vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"origin"</span>, <span class="st">"dest"</span>)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>    flights[, keep_vec, with <span class="ot">=</span> <span class="cn">FALSE</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>To remove a column using the range or character methods, place a <code>!</code> before the columns to remove</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>    flights[, <span class="sc">!</span><span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"month"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>    flights[, <span class="sc">!</span>(year<span class="sc">:</span>month)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>To remove a column using the list method, assign that variable to be <code>NULL</code> using modify by reference (see below). If you run the below code, you’ll need to reload the <code>flights</code> data to get back <code>year</code> and <code>month</code>.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>    flights[, <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"month"</span>) <span class="sc">:</span><span class="er">=</span> .(<span class="cn">NULL</span>, <span class="cn">NULL</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><strong>Exercise</strong>: Use data.table to select the <code>year</code>, <code>month</code>, <code>day</code>, and <code>hour</code> columns.</li>
</ul>
<ul>
<li>Unlike the tidyverse, you filter rows and select columns in one call rather than using two separate functions.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## data.table way</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>    flights[origin <span class="sc">==</span> <span class="st">"JFK"</span> <span class="sc">&amp;</span> dest <span class="sc">==</span> <span class="st">"LAX"</span>, .(year, month, day, hour)]</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    <span class="do">## equivalent tidyverse way</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    flights_tib <span class="sc">%&gt;%</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(origin <span class="sc">==</span> <span class="st">"JFK"</span>, dest <span class="sc">==</span> <span class="st">"LAX"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(year, month, day, hour)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><strong>Exercise</strong>: Use data.table to print out just the departure delays from JFK.</li>
</ul>
</section>
<section id="creating-new-variables-mutate" class="level2">
<h2 class="anchored" data-anchor-id="creating-new-variables-mutate">Creating New Variables (Mutate)</h2>
<ul>
<li><p>The <strong>fastest</strong> way to create and remove variables in a <code>data.table</code> is by <a href="https://en.wikipedia.org/wiki/Evaluation_strategy#Call_by_reference">reference</a>, where we <strong>modify</strong> the <code>data.table</code>, we don’t create a new <code>data.table</code>.</p></li>
<li><p>Use <code>:=</code> to modify a data.table by reference. You put the variable names (as a character vector) to the left of <code>:=</code>. You put the new variables (as a list) to the right of <code>:=</code>.</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## data.table way</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>    flights[, <span class="fu">c</span>(<span class="st">"gain"</span>) <span class="sc">:</span><span class="er">=</span> .(dep_delay <span class="sc">-</span> arr_delay)]</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>    flights</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## equivalent tidyverse way    </span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>    flights_tib <span class="sc">%&gt;%</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">gain =</span> dep_delay <span class="sc">-</span> arr_delay) <span class="ot">-&gt;</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>      flights_tib</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    flights_tib</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Quickly remove a column by setting that variable to NULL.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## data.table way</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>    flights[, <span class="fu">c</span>(<span class="st">"gain"</span>) <span class="sc">:</span><span class="er">=</span> .(<span class="cn">NULL</span>)]</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>    flights</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## equivalent tidyverse way</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>    flights_tib <span class="sc">%&gt;%</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(<span class="sc">-</span>gain) <span class="ot">-&gt;</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>      flights_tib</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>    flights_tib</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Add multiple variables by separating them with columns.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>    flights[, <span class="fu">c</span>(<span class="st">"gain"</span>, <span class="st">"dist_km"</span>) <span class="sc">:</span><span class="er">=</span> .(dep_delay <span class="sc">-</span> arr_delay, <span class="fl">1.61</span> <span class="sc">*</span> distance)]</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>    flights</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>    flights[, <span class="fu">c</span>(<span class="st">"gain"</span>, <span class="st">"dist_km"</span>) <span class="sc">:</span><span class="er">=</span> .(<span class="cn">NULL</span>, <span class="cn">NULL</span>)]</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>    flights</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><strong>Exercise</strong>: Add a variable called <code>speed</code> that is the average air speed of the plane in miles per hour. Then remove this variable.</li>
</ul>
</section>
<section id="group-summaries" class="level2">
<h2 class="anchored" data-anchor-id="group-summaries">Group Summaries</h2>
<ul>
<li>You calculate summaries in the column slot. It’s best to use the list method.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## data.table way</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>    flights[, .(<span class="at">dd =</span> <span class="fu">mean</span>(dep_delay))]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## equivalent tidyverse way</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>    flights_tib <span class="sc">%&gt;%</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">summarize</span>(<span class="at">dd =</span> <span class="fu">mean</span>(dep_delay))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## data.table way</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>    flights[, .(<span class="at">dd =</span> <span class="fu">mean</span>(dep_delay), <span class="at">ad =</span> <span class="fu">mean</span>(arr_delay))]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## equivalent tidyverse way</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>    flights_tib <span class="sc">%&gt;%</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">summarize</span>(<span class="at">dd =</span> <span class="fu">mean</span>(dep_delay), <span class="at">ad =</span> <span class="fu">mean</span>(arr_delay))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Count the number of rows with <code>.N</code>.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## data.table way</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>    flights[, .(.N)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## equivalent tidyverse way</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>    flights_tib <span class="sc">%&gt;%</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">count</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p>In data.table, you create grouped summaries by simultaneously grouping and calculating summaries in one line, not separately like in dplyr.</p></li>
<li><p>In data.table, you use the <code>by</code> argument to specify the grouping variable. It should also be a list.</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## data.table way</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>    flights[, .(<span class="at">dd =</span> <span class="fu">mean</span>(dep_delay)) , by <span class="ot">=</span> .(origin)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## equivalent tidyverse way</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>    flights_tib <span class="sc">%&gt;%</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(origin) <span class="sc">%&gt;%</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">summarize</span>(<span class="at">dd =</span> <span class="fu">mean</span>(dep_delay))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>You can calculate more than one group summary at a time, or group by more than one variable.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## data.table way</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>    flights[, .(<span class="at">dd =</span> <span class="fu">mean</span>(dep_delay), .N), by <span class="ot">=</span> .(origin, carrier)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## equivalent tidyverse way</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>    flights_tib <span class="sc">%&gt;%</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(origin, carrier) <span class="sc">%&gt;%</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">summarize</span>(<span class="at">dd =</span> <span class="fu">mean</span>(dep_delay), <span class="at">N =</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><strong>Exercise</strong>: Use data.table to calculate the median air time for each month.</li>
</ul>
<ul>
<li><strong>Exercise</strong>: Use data.table to calculate the number of trips from each airport for the carrier code DL.</li>
</ul>
<ul>
<li><strong>Exercise</strong>: Use data.table to calculate the mean departure delay for each origin in the months of January and February.</li>
</ul>
</section>
<section id="recoding" class="level2">
<h2 class="anchored" data-anchor-id="recoding">Recoding</h2>
<ul>
<li><p>Suppose you want to change the values of a variable. In the tidyverse, we used <code>recode()</code> to do this.</p></li>
<li><p>In data.table, we filter the rows then mutate by reference.</p></li>
<li><p>Let’s substitute <code>24</code> in <code>hour</code> to <code>0</code>.</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sort</span>(<span class="fu">unique</span>(flights<span class="sc">$</span>hour))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sort</span>(<span class="fu">unique</span>(flights_tib<span class="sc">$</span>hour))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## data.table way</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>    flights[hour <span class="sc">==</span> <span class="dv">24</span>L, hour <span class="sc">:</span><span class="er">=</span> <span class="dv">0</span>L]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sort</span>(<span class="fu">unique</span>(flights<span class="sc">$</span>hour))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>flights_tib <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"../data/flights14.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><strong><code>case_match()</code></strong> is easier to use with numeric vectors, because you don’t need to turn the numeric values into names</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## equivalent tidyverse way</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>    flights_tib <span class="sc">%&gt;%</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">hour =</span> <span class="fu">case_match</span>(hour, <span class="dv">24</span> <span class="sc">~</span> <span class="dv">0</span>L, <span class="at">.default =</span> hour)) <span class="ot">-&gt;</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>      flights_tib</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sort</span>(<span class="fu">unique</span>(flights_tib<span class="sc">$</span>hour))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><strong>Exercise</strong>: In the <code>origin</code> variable, change <code>"JFK"</code> to <code>"John F. Kennedy"</code>, <code>"LGA"</code> to <code>"LaGuardia"</code>, and <code>"EWR"</code> to <code>"Newark Liberty"</code>.</li>
</ul>
</section>
<section id="gathering" class="level2">
<h2 class="anchored" data-anchor-id="gathering">Gathering</h2>
<ul>
<li><p>Problem: One variable spread across multiple columns.</p></li>
<li><p>Column names are actually <em>values</em> of a variable</p></li>
<li><p>Recall <code>table4a</code> and <code>table4b</code> from the tidyr package</p></li>
</ul>
<p><code>table1</code>, <code>table2</code>, <code>table3</code>, <code>table4a</code>, <code>table4b</code>, and <code>table5</code> all display the number of TB (tuberculosis) cases documented by the World Health Organization in <code>Afghanistan</code>, <code>Brazil</code>, and <code>China</code> between <code>1999</code> and <code>2000</code>. The data contains values associated with four variables (<code>country</code>, <code>year</code>, <code>cases</code>, and <code>population</code>), but each table organizes the values in a different layout.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>    dt4a <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(tidyr<span class="sc">::</span>table4a)</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>    dt4b <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(tidyr<span class="sc">::</span>table4b)</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>    dt4a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       country   1999   2000
        &lt;char&gt;  &lt;num&gt;  &lt;num&gt;
1: Afghanistan    745   2666
2:      Brazil  37737  80488
3:       China 212258 213766</code></pre>
</div>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>    dt4b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       country       1999       2000
        &lt;char&gt;      &lt;num&gt;      &lt;num&gt;
1: Afghanistan   19987071   20595360
2:      Brazil  172006362  174504898
3:       China 1272915272 1280428583</code></pre>
</div>
</div>
<ul>
<li>Solution: <code>melt()</code>:</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## data.table way</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">melt</span>(dt4a, </span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">id.vars       =</span> <span class="fu">c</span>(<span class="st">"country"</span>),</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">measure.vars  =</span> <span class="fu">c</span>(<span class="st">"1999"</span>, <span class="st">"2000"</span>),</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">variable.name =</span> <span class="st">"year"</span>,</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">value.name    =</span> <span class="st">"count"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## Equivalent tidyverse way</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>    tidyr<span class="sc">::</span>table4a <span class="sc">%&gt;%</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">gather</span>(<span class="st">`</span><span class="at">1999</span><span class="st">`</span>, <span class="st">`</span><span class="at">2000</span><span class="st">`</span>, <span class="at">key =</span> <span class="st">"year"</span>, <span class="at">value =</span> <span class="st">"count"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## or</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>    tidyr<span class="sc">::</span>table4a <span class="sc">%&gt;%</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">"1999"</span>, <span class="st">"2000"</span>), </span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">names_to =</span> <span class="st">"year"</span>, </span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>                   <span class="at">values_to =</span> <span class="st">"count"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p>RDS visualization:</p>
<p><img src="./figs/tidy-9.png" class="img-fluid"><br>
</p></li>
<li><p><strong>Exercise</strong>: gather the <code>monkeymem</code> data frame (available at <a href="https://data-science-master.github.io/lectures/data/tidy_exercise/monkeymem.csv" class="uri">https://data-science-master.github.io/lectures/data/tidy_exercise/monkeymem.csv</a>). The cell values represent identification accuracy of some objects (in percent of 20 trials).</p></li>
</ul>
</section>
<section id="spreading" class="level2">
<h2 class="anchored" data-anchor-id="spreading">Spreading</h2>
<ul>
<li><p>Problem: One observation is spread across multiple rows.</p></li>
<li><p>One column contains variable names. One column contains values for the different variables.</p></li>
<li><p>Recall <code>table2</code> from the tidyr package</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>    dt2 <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(tidyr<span class="sc">::</span>table2)</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>    dt2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        country  year       type      count
         &lt;char&gt; &lt;num&gt;     &lt;char&gt;      &lt;num&gt;
 1: Afghanistan  1999      cases        745
 2: Afghanistan  1999 population   19987071
 3: Afghanistan  2000      cases       2666
 4: Afghanistan  2000 population   20595360
 5:      Brazil  1999      cases      37737
 6:      Brazil  1999 population  172006362
 7:      Brazil  2000      cases      80488
 8:      Brazil  2000 population  174504898
 9:       China  1999      cases     212258
10:       China  1999 population 1272915272
11:       China  2000      cases     213766
12:       China  2000 population 1280428583</code></pre>
</div>
</div>
<ul>
<li>Solution: <code>dcast()</code>. In the <code>formula</code> argument, put the “id variables” to the left and the “key” variables to the right. In tidyverse jargon, the <code>value</code> is everything not stated in the formula and the <code>key</code> is everything to the left of the tilde.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## data.table way</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">dcast</span>(dt2, <span class="at">formula =</span> country <span class="sc">+</span> year <span class="sc">~</span> type, <span class="at">value.var =</span> <span class="st">"count"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## Equivalent tidyverse way</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>    tidyr<span class="sc">::</span>table2 <span class="sc">%&gt;%</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">spread</span>(<span class="at">key =</span> type, <span class="at">value =</span> count)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## or</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>    tidyr<span class="sc">::</span>table2 <span class="sc">%&gt;%</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> <span class="fu">c</span>(<span class="st">"country"</span>, <span class="st">"year"</span>), </span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">names_from =</span> <span class="st">"type"</span>, </span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">values_from =</span> <span class="st">"count"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p>RDS visualization:</p>
<p><img src="./figs/tidy-8.png" class="img-fluid">&nbsp;</p></li>
<li><p><strong>Exercise</strong>: Spread the <code>flowers1</code> data frame (available at <a href="https://data-science-master.github.io/lectures/data/tidy_exercise/flowers1.csv" class="uri">https://data-science-master.github.io/lectures/data/tidy_exercise/flowers1.csv</a>).</p></li>
</ul>
</section>
<section id="separating" class="level2">
<h2 class="anchored" data-anchor-id="separating">Separating</h2>
<ul>
<li>To separate a column into two columns, use the base function <code>tstrsplit()</code>.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>    dt3 <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(tidyr<span class="sc">::</span>table3)</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>    dt3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       country  year              rate
        &lt;char&gt; &lt;num&gt;            &lt;char&gt;
1: Afghanistan  1999      745/19987071
2: Afghanistan  2000     2666/20595360
3:      Brazil  1999   37737/172006362
4:      Brazil  2000   80488/174504898
5:       China  1999 212258/1272915272
6:       China  2000 213766/1280428583</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## data.table way</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>    dt3[, <span class="fu">c</span>(<span class="st">"cases"</span>, <span class="st">"population"</span>) <span class="sc">:</span><span class="er">=</span> <span class="fu">tstrsplit</span>(rate, <span class="at">split =</span> <span class="st">"/"</span>)]</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>    dt3[, rate <span class="sc">:</span><span class="er">=</span> <span class="cn">NULL</span>]</span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>    dt3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## equivalent tidyverse way</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>    tidyr<span class="sc">::</span>table3 <span class="sc">%&gt;%</span></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">separate</span>(rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"cases"</span>, <span class="st">"population"</span>), <span class="at">sep =</span> <span class="st">"/"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p>RDS visualization:</p>
<p><img src="./figs/tidy-17.png" class="img-fluid">&nbsp;</p></li>
<li><p><strong>Exercise</strong>: Separate the <code>flowers2</code> data frame (available at <a href="https://data-science-master.github.io/lectures/data/tidy_exercise/flowers2.csv" class="uri">https://data-science-master.github.io/lectures/data/tidy_exercise/flowers2.csv</a>).</p></li>
</ul>
</section>
<section id="uniting" class="level2">
<h2 class="anchored" data-anchor-id="uniting">Uniting</h2>
<ul>
<li>To unite, use <code>paste()</code>.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>    dt5 <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(tidyr<span class="sc">::</span>table5)</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>    dt5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       country century   year              rate
        &lt;char&gt;  &lt;char&gt; &lt;char&gt;            &lt;char&gt;
1: Afghanistan      19     99      745/19987071
2: Afghanistan      20     00     2666/20595360
3:      Brazil      19     99   37737/172006362
4:      Brazil      20     00   80488/174504898
5:       China      19     99 212258/1272915272
6:       China      20     00 213766/1280428583</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## data.table way</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>    dt5[, year <span class="sc">:</span><span class="er">=</span> <span class="fu">paste</span>(century, year, <span class="at">sep =</span> <span class="st">""</span>)]</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>    dt5[, century <span class="sc">:</span><span class="er">=</span> <span class="cn">NULL</span>]</span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>    dt5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## Equivalent tidyverse way</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>    tidyr<span class="sc">::</span>table5 <span class="sc">%&gt;%</span></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">unite</span>(century, year, <span class="at">col =</span> <span class="st">"year"</span>, <span class="at">sep =</span> <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p>RDS visualization:</p>
<p><img src="./figs/tidy-18.png" class="img-fluid"><br>
</p></li>
<li><p><strong>Exercise</strong>: Re-unite the data frame you separated from the flowers2 exercise. Use a comma for the separator.</p></li>
</ul>
</section>
<section id="chaining" class="level2">
<h2 class="anchored" data-anchor-id="chaining">Chaining</h2>
<ul>
<li><p>In the tidyverse, we chain commands by using the pipe <code>%&gt;%</code>. In data.table, we chain commands by adding additional brackets after the brackets we used. Data.table makes this very efficient.</p></li>
<li><p>Let’s calculate the mean arrival delay for american airlines for each origin/destination pair, then order the results by origin in increasing order, breaking ties by destination in decreasing order.</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## data.table way</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>    flights[carrier <span class="sc">==</span> <span class="st">"AA"</span>, .(<span class="at">ad =</span> <span class="fu">mean</span>(arr_delay)), by <span class="ot">=</span> .(origin, dest)][<span class="fu">order</span>(origin, <span class="sc">-</span>dest)]</span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>    <span class="do">## Usual indentation for readability:</span></span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>    flights[carrier <span class="sc">==</span> <span class="st">"AA"</span>, .(<span class="at">ad =</span> <span class="fu">mean</span>(arr_delay)), by <span class="ot">=</span> .(origin, dest)</span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>            ][<span class="fu">order</span>(origin, <span class="sc">-</span>dest)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## Equivalent tidyverse way</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>    flights_tib <span class="sc">%&gt;%</span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(carrier <span class="sc">==</span> <span class="st">"AA"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(origin, dest) <span class="sc">%&gt;%</span></span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">summarize</span>(<span class="at">ad =</span> <span class="fu">mean</span>(arr_delay)) <span class="sc">%&gt;%</span></span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">arrange</span>(origin, <span class="fu">desc</span>(dest))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="joining" class="level2">
<h2 class="anchored" data-anchor-id="joining">Joining</h2>
<ul>
<li>We’ll use the following <code>data.table</code>s to introduce joining.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>    xdf <span class="ot">&lt;-</span> <span class="fu">data.table</span>(<span class="at">mykey =</span> <span class="fu">c</span>(<span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"3"</span>),</span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">x_val =</span> <span class="fu">c</span>(<span class="st">"x1"</span>, <span class="st">"x2"</span>, <span class="st">"x3"</span>))</span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>    ydf <span class="ot">&lt;-</span> <span class="fu">data.table</span>(<span class="at">mykey =</span> <span class="fu">c</span>(<span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"4"</span>),</span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>                      <span class="at">y_val =</span> <span class="fu">c</span>(<span class="st">"y1"</span>, <span class="st">"y2"</span>, <span class="st">"y3"</span>))</span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>    xdf</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    mykey  x_val
   &lt;char&gt; &lt;char&gt;
1:      1     x1
2:      2     x2
3:      3     x3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>    ydf</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    mykey  y_val
   &lt;char&gt; &lt;char&gt;
1:      1     y1
2:      2     y2
3:      4     y3</code></pre>
</div>
</div>
<pre><code>![](./figs/join-setup.png)\ </code></pre>
<ul>
<li><p>Use the <code>merge()</code> function for <em>all</em> joining in data.table.</p></li>
<li><p>Inner Join:</p>
<p><img src="./figs/join-inner.png" class="img-fluid">&nbsp;</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## data.table way</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">merge</span>(xdf, ydf, <span class="at">by =</span> <span class="st">"mykey"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## equivalent tidyverse way</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">inner_join</span>(xdf, ydf, <span class="at">by =</span> <span class="st">"mykey"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p>Outer Joins</p>
<p><img src="./figs/join-outer.png" class="img-fluid">&nbsp;</p></li>
<li><p>Left Join</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## data.table way</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">merge</span>(xdf, ydf, <span class="at">by =</span> <span class="st">"mykey"</span>, <span class="at">all.x =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## equivalent tidyverse way</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(xdf, ydf, <span class="at">by =</span> <span class="st">"mykey"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Right Join</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## data.table way</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">merge</span>(xdf, ydf, <span class="at">by =</span> <span class="st">"mykey"</span>, <span class="at">all.y =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## equivalent tidyverse way</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">right_join</span>(xdf, ydf, <span class="at">by =</span> <span class="st">"mykey"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Outer Join</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## data.table way</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">merge</span>(xdf, ydf, <span class="at">by =</span> <span class="st">"mykey"</span>, <span class="at">all.x =</span> <span class="cn">TRUE</span>, <span class="at">all.y =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## equivalent tidyverse way</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">full_join</span>(xdf, ydf, <span class="at">by =</span> <span class="st">"mykey"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Binding Rows:</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## data.table way</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rbind</span>(xdf, ydf, <span class="at">fill =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## equivalent tidyverse way</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">bind_rows</span>(xdf, ydf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>When you have different key names, use the <code>by.x</code> and <code>by.y</code> arguments instead of the <code>by</code> argument.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>    <span class="fu">names</span>(ydf)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">"newkey"</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>    ydf</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   newkey  y_val
   &lt;char&gt; &lt;char&gt;
1:      1     y1
2:      2     y2
3:      4     y3</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>    <span class="do">## data.table way</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">merge</span>(xdf, ydf, <span class="at">by.x =</span> <span class="st">"mykey"</span>, <span class="at">by.y =</span> <span class="st">"newkey"</span>)</span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a>    <span class="do">## equivalent tidyverse way</span></span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">inner_join</span>(xdf, ydf, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"mykey"</span> <span class="ot">=</span> <span class="st">"newkey"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><strong>Exercise</strong>: Recall the <code>nycflights13</code> dataset</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(nycflights13)</span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">data</span>(<span class="st">"flights"</span>)</span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">data</span>(<span class="st">"airlines"</span>)</span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">data</span>(<span class="st">"planes"</span>)</span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a>    flights  <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(flights)</span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a>    airlines <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(airlines)</span>
<span id="cb103-7"><a href="#cb103-7" aria-hidden="true" tabindex="-1"></a>    planes   <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(planes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>Add the full airline names to the `flights` data.table.</code></pre>
<ul>
<li><strong>Exercise</strong>: Select all flights that use a plane where you have some annotation.</li>
</ul>
</section>
<section id="additional-references" class="level2">
<h2 class="anchored" data-anchor-id="additional-references">Additional References</h2>
<p>There is <strong>so</strong> much more to data.table. You can do quite complicated and sophisticated data manipulations using data.table that would require a lot more typing in the tidyverse. I am not an expert in much of this functionality. A large number of articles and references are given on the homepage: <a href="https://rdatatable.gitlab.io/data.table/" class="uri">https://rdatatable.gitlab.io/data.table/</a>.</p>
</section>
</section>
<section id="sql" class="level1">
<h1>SQL</h1>
<p>At the core of Big Data and analytic is the ability to store, manage and query data efficiently. This is where SQL (Structure Query Language) comes into play.</p>
<p>SQL is most widely-used language for managing and manipulating relational databases. It enables users to create, update, retrieve, and delete data. SQL works with relational databases like MySQL, PostgreSQL, Oracle, and Microsoft SQL Server. In the realm of Big Data, SQL is often used for querying and interacting with large datasets stored in relational databases or distributed databases (like Hadoop, Spark, and Google BigQuery).</p>
<section id="using-sql-in-r-with-duckdb-and-dbi" class="level2">
<h2 class="anchored" data-anchor-id="using-sql-in-r-with-duckdb-and-dbi">Using SQL in R with {<code>duckdb</code>} and {<code>DBI</code>}</h2>
<ul>
<li><p>There are a lots of database management systems (DBMS) that use SQL to connect to their databases.</p></li>
<li><p>The most popular DBMS is probably <code>SQLite</code>. Other popular ones are <code>MySQ</code>L and `PostgreSQL.</p></li>
</ul>
<p>{<code>DuckDB</code>} is a specific type of SQL database (backend). To connect to <code>DuckDB</code> or any other <code>SQL</code> database in R, you need to use the {<code>DBI</code>} package, which allows R to communicate with SQL databases. So, both {<code>DuckDB</code>} and {<code>DBI</code>} are loaded to manage SQL operations in R.</p>
</section>
<section id="dbeaver" class="level2">
<h2 class="anchored" data-anchor-id="dbeaver">DBeaver</h2>
<ul>
<li><p>No job will have you use R Studio to do SQL.So, we are going to try <code>DBeaver</code> IDE.</p></li>
<li><p><code>DBeaver</code> is a database management tool with a graphical user interface (GUI) that supports a wide range of databases. It simplifies the process of managing databases, running SQL queries, and visualizing results. DBeaver can be used with many relational databases (MySQL, PostgreSQL, SQLite, etc.) as well as NoSQL databases (MongoDB, Cassandra).</p></li>
</ul>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>